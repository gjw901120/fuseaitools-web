{"version":3,"file":"useToast-CATlmXE8.js","sources":["../../../../composables/useToast.js"],"sourcesContent":["/**\r\n * Toast 通知管理（全局单例）\r\n */\r\n// 全局状态，确保所有组件共享同一个 toasts 数组\r\nconst globalToasts = ref([])\r\nlet globalToastId = 0\r\n\r\nexport const useToast = () => {\r\n  const toasts = globalToasts\r\n  let toastId = globalToastId\r\n\r\n  /**\r\n   * 显示 Toast 通知\r\n   * @param {string} message - 消息内容\r\n   * @param {string} type - 类型：error, success, warning, info\r\n   * @param {number} duration - 显示时长（毫秒），0 表示不自动关闭\r\n   */\r\n  const showToast = (message, type = 'error', duration = 3000) => {\r\n    if (!message) {\r\n      console.warn('Toast message is empty')\r\n      return\r\n    }\r\n\r\n    const id = ++globalToastId\r\n    const toast = {\r\n      id,\r\n      message,\r\n      type,\r\n      duration\r\n    }\r\n\r\n    globalToasts.value.push(toast)\r\n    console.log('Toast added:', toast, 'Total toasts:', globalToasts.value.length)\r\n\r\n    // 如果设置了自动关闭，在指定时间后移除\r\n    if (duration > 0) {\r\n      setTimeout(() => {\r\n        removeToast(id)\r\n      }, duration)\r\n    }\r\n\r\n    return id\r\n  }\r\n\r\n  /**\r\n   * 移除 Toast\r\n   * @param {number} id - Toast ID\r\n   */\r\n  const removeToast = (id) => {\r\n    const index = globalToasts.value.findIndex(t => t.id === id)\r\n    if (index > -1) {\r\n      globalToasts.value.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 显示错误消息\r\n   */\r\n  const showError = (message, duration = 3000) => {\r\n    return showToast(message, 'error', duration)\r\n  }\r\n\r\n  /**\r\n   * 显示成功消息\r\n   */\r\n  const showSuccess = (message, duration = 3000) => {\r\n    return showToast(message, 'success', duration)\r\n  }\r\n\r\n  /**\r\n   * 显示警告消息\r\n   */\r\n  const showWarning = (message, duration = 3000) => {\r\n    return showToast(message, 'warning', duration)\r\n  }\r\n\r\n  /**\r\n   * 显示信息消息\r\n   */\r\n  const showInfo = (message, duration = 3000) => {\r\n    return showToast(message, 'info', duration)\r\n  }\r\n\r\n  /**\r\n   * 清除所有 Toast\r\n   */\r\n  const clearAll = () => {\r\n    globalToasts.value = []\r\n  }\r\n\r\n  return {\r\n    toasts: readonly(toasts),\r\n    showToast,\r\n    showError,\r\n    showSuccess,\r\n    showWarning,\r\n    showInfo,\r\n    removeToast,\r\n    clearAll\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";AAIA,MAAM,eAAe,IAAI,EAAE;AAC3B,IAAI,gBAAgB;AAER,MAAC,WAAW,MAAM;AAC5B,QAAM,SAAS;AASf,QAAM,YAAY,CAAC,SAAS,OAAO,SAAS,WAAW,QAAS;AAC9D,QAAI,CAAC,SAAS;AACZ,cAAQ,KAAK,wBAAwB;AACrC;AAAA,IACF;AAEA,UAAM,KAAK,EAAE;AACb,UAAM,QAAQ;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACN;AAEI,iBAAa,MAAM,KAAK,KAAK;AAC7B,YAAQ,IAAI,gBAAgB,OAAO,iBAAiB,aAAa,MAAM,MAAM;AAG7E,QAAI,WAAW,GAAG;AAChB,iBAAW,MAAM;AACf,oBAAY,EAAE;AAAA,MAChB,GAAG,QAAQ;AAAA,IACb;AAEA,WAAO;AAAA,EACT;AAMA,QAAM,cAAc,CAAC,OAAO;AAC1B,UAAM,QAAQ,aAAa,MAAM,UAAU,OAAK,EAAE,OAAO,EAAE;AAC3D,QAAI,QAAQ,IAAI;AACd,mBAAa,MAAM,OAAO,OAAO,CAAC;AAAA,IACpC;AAAA,EACF;AAKA,QAAM,YAAY,CAAC,SAAS,WAAW,QAAS;AAC9C,WAAO,UAAU,SAAS,SAAS,QAAQ;AAAA,EAC7C;AAKA,QAAM,cAAc,CAAC,SAAS,WAAW,QAAS;AAChD,WAAO,UAAU,SAAS,WAAW,QAAQ;AAAA,EAC/C;AAKA,QAAM,cAAc,CAAC,SAAS,WAAW,QAAS;AAChD,WAAO,UAAU,SAAS,WAAW,QAAQ;AAAA,EAC/C;AAKA,QAAM,WAAW,CAAC,SAAS,WAAW,QAAS;AAC7C,WAAO,UAAU,SAAS,QAAQ,QAAQ;AAAA,EAC5C;AAKA,QAAM,WAAW,MAAM;AACrB,iBAAa,QAAQ,CAAA;AAAA,EACvB;AAEA,SAAO;AAAA,IACL,QAAQ,SAAS,MAAM;AAAA,IACvB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AACA;"}