import{f}from"./BM9dyuvh.js";import{u as p}from"./CGGC2AfW.js";import{r as m}from"./C0Gp0dND.js";const d="api_common_models_price",c=m(null);function v(){const{get:s}=p();return{priceData:c,fetchPrices:async()=>{try{const r=await f(d,async()=>{const t=await s("/api/common/models/price");return t&&typeof t=="object"?t:null});return c.value=r,c.value}catch(r){return console.warn("Failed to fetch model price:",r),c.value}},getPrice:(r,t={})=>{const u=c.value;if(!u||!r)return null;const n=u[r];if(!n||typeof n!="object")return null;if(n.type==="ONCE"&&n.once!=null){const e=n.once.credits;return typeof e=="number"?e:typeof e=="string"?parseFloat(e):null}if(n.type==="RULE"&&Array.isArray(n.rules)&&n.rules.length>0){const e=n.rules.find(a=>Object.keys(t).every(i=>{const o=t[i];if(o==null)return!0;const l=a[i];return String(l)===String(o)}));return e&&typeof e.credits=="number"?e.credits:e&&typeof e.credits=="string"?parseFloat(e.credits):null}return null},formatCredits:r=>{if(r==null||Number.isNaN(r))return"";const t=Number(r);return t%1===0?String(t):t.toFixed(2)}}}export{v as u};
